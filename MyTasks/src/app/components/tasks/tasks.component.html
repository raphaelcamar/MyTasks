<app-header></app-header>
<div >
  
<h1 class="tasks" >Cadastre uma tarefa</h1>
  <form class="container add-task" [formGroup]="formulary" (ngSubmit)="addTask()">
    <mat-form-field appearance="fill" color="accent">
      <mat-label >Nome</mat-label>
      <input matInput type="text" formControlName="name" name="name" placeholder="Nome" required>
      <mat-error >Nome não pode ser vazio, nem conter números ou caracteres especiais</mat-error>
    </mat-form-field>
  
    <mat-form-field appearance="fill" color="accent">
      <mat-label >Descrição</mat-label>
      <input matInput type="text" formControlName="description" name="description" placeholder="Descrição" required/>
      <mat-error >Descrição não pode ser vazio, nem conter números ou caracteres especiais</mat-error>
    </mat-form-field>
  
    <mat-form-field color="accent" appearance="fill">
      <mat-label>Selecione a data</mat-label>
      <input matInput [matDatepicker]="picker2" formControlName="data" required>
      <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
      <mat-datepicker #picker2 color="primary"></mat-datepicker>
      <mat-error >A data tem que ser válida</mat-error>
    </mat-form-field>
  
    <mat-form-field appearance="fill">
      <mat-label>Processo</mat-label>
      <mat-select formControlName="isFinished">
        <mat-option value="Não iniciado" selected>Não iniciado</mat-option>
        <mat-option value="Finalizado">Finalizado</mat-option>
        <mat-option value="Em processo">Em processo</mat-option>
        <mat-option value="Cancelado">Cancelado</mat-option>
      </mat-select>
      <mat-error>Não pode ser vazio!</mat-error>
    </mat-form-field>
  
    <mat-form-field appearance="fill">
      <mat-label>Importância</mat-label>
      <mat-select formControlName="importance">
        <mat-option value="Sem importancia" selected>Sem muita importância</mat-option>
        <mat-option value="Importante">Importante</mat-option>
        <mat-option value="Urgente">Urgente</mat-option>
      </mat-select>
      <mat-error>Não pode ser vazio!</mat-error>
    </mat-form-field>
    
    <button mat-raised-button  [disabled]="!formulary.valid" color="primary" >Cadastrar</button>

  </form>
</div>
<!-- [disabled]="!formulary.valid" -->

<section>
  <h1 class="tasks" >Suas Tarefas!</h1>

  <!-- MUDAR PARA COMPONENTE DEPOIS -->
  <table mat-table [dataSource]="dataSource" class="mat-elevation-z4">
  
    <!-- Position Column -->
    <ng-container matColumnDef="name">
      <th mat-header-cell *matHeaderCellDef> Nome </th>
      <td mat-cell *matCellDef="let task"> {{task.name}} </td>
    </ng-container>
  
    <!-- description Column -->
    <ng-container matColumnDef="description">
      <th mat-header-cell *matHeaderCellDef> Descrição </th>
      <td mat-cell *matCellDef="let task"> {{task.description}} </td>
    </ng-container>
  
    <!-- data Column -->
    <ng-container matColumnDef="data">
      <th mat-header-cell *matHeaderCellDef> Data </th>
      <td mat-cell *matCellDef="let task" > {{task.data | date  : 'dd/MM/yyyy'}} </td>
    </ng-container>
  
    <!-- isFinished Column -->
    <ng-container matColumnDef="isFinished">
      <th mat-header-cell *matHeaderCellDef> Está finalizado </th>
      <td mat-cell *matCellDef="let task"> {{task.isFinished}} </td>
    </ng-container>

    <ng-container matColumnDef="importance">
      <th mat-header-cell *matHeaderCellDef> Importância </th>
      <td mat-cell *matCellDef="let task"> {{task.importance}} </td>
    </ng-container>

    <ng-container matColumnDef="edit">
      <th mat-header-cell *matHeaderCellDef> Editar </th>
      <td mat-cell *matCellDef="let task"><button mat-button class="edit" (click)="openDialogUpdate(task.id)">Editar</button></td>
    </ng-container>

    <ng-container matColumnDef="delete">
      <th mat-header-cell *matHeaderCellDef> Deletar </th>
      <td mat-cell *matCellDef="let task"><button mat-button color="warn" (click)="openDialogDelete(task.id)">Deletar</button></td>
    </ng-container>
  
    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let dataSource; columns: displayedColumns;"></tr>
  </table>
  

</section>
<app-footer></app-footer>